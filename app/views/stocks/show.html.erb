<p style="color: green">
  <%= notice %>
</p>
<div data-controller="total-cost">
  <img src="<%= @stock.logo_url %>" 
     class="img-responsive img-rounded"
     alt="<%= @stock.company_name %> logo"
   />
  <h3 class="list-group-item-heading">
    <%= @stock.company_name %> 
    (<strong><%= @stock.symbol %></strong>)
  </h3>
  <h5 data-total-cost-target="price">
    <strong>Latest Price:</strong> 
    <%= number_to_currency @stock.latest_price %> 
  </h5>
  <h5><strong>Quantity:</strong> 
    <%= @stock.quantity %> 
  </h5>
  <h5><strong>Market Cap:</strong>
    <%= number_to_currency @stock.market_cap %> 
  </h5>

  <h5>
    <strong>Total Cost:</strong>
    <input readonly="true" data-total-cost-target="total"/>
  </h5>
  <%= form_with model: @investment do |f| %>
    <%= f.hidden_field :user_id, value: current_user.id %>
    <%= f.hidden_field :stock_id, value: @stock %>
    <h5>
      <strong>Quantity:</strong>
      <%= f.number_field :quantity, 
        min: 1, max: @stock.quantity,
        data: { 
          action: "keyup->total-cost#update", 
          total_cost_target: "quantity"
        } 
      %>
    </h5>
    <%= f.submit value: "Buy", class: "btn btn-primary" %>
  <% end %>
</div>
